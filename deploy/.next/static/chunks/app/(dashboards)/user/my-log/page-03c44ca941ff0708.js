(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{1946:(e,s,t)=>{Promise.resolve().then(t.bind(t,8424))},6046:(e,s,t)=>{"use strict";var a=t(6658);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},8424:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5155),r=t(2615),l=t(6046),i=t(2115),d=t(8173),n=t.n(d);let c=[{id:1,date:"2024-03-15",project:"مشروع 1",hours:8,description:"تطوير واجهة المستخدم",status:"معلق"},{id:2,date:"2024-03-14",project:"مشروع 2",hours:6,description:"اجتماع مع العميل",status:"معتمد"},{id:3,date:"2024-03-13",project:"مشروع 1",hours:7,description:"تطوير قاعدة البيانات",status:"معتمد"},{id:4,date:"2024-03-12",project:"مشروع 3",hours:5,description:"اختبار الوظائف",status:"معتمد"}],o=[{id:1,name:"مشروع 1"},{id:2,name:"مشروع 2"},{id:3,name:"مشروع 3"}];function u(){let{data:e,status:s}=(0,r.useSession)(),t=(0,l.useRouter)(),[d,u]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[g,f]=(0,i.useState)("");(0,i.useEffect)(()=>{var a;"unauthenticated"===s?t.push("/auth/login"):(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.role)!=="user"&&t.push("/auth/login")},[s,e,t]);let j=async()=>{await (0,r.signOut)({redirect:!0,callbackUrl:"/auth/login"})},b=c.filter(e=>{let s=!0;return d&&e.project!==d&&(s=!1),x&&e.status!==x&&(s=!1),h&&e.date<h&&(s=!1),g&&e.date>g&&(s=!1),s}),N=b.reduce((e,s)=>e+s.hours,0);return"loading"===s?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg",children:"جاري التحميل..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"fixed left-0 right-0 top-0 z-50 bg-white shadow-md",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Viken Bad"}),(0,a.jsx)("button",{onClick:j,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"تسجيل خروج"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t pt-4",children:[(0,a.jsxs)("nav",{className:"flex items-center space-x-6 space-x-reverse",children:[(0,a.jsx)(n(),{href:"/user/time-register",className:"text-sm font-medium text-gray-700 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"تسجيل الوقت"}),(0,a.jsx)(n(),{href:"/user/my-log",className:"text-sm font-medium text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"سجلي"})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"لوحة المستخدم"})]})]})})}),(0,a.jsx)("main",{className:"mx-auto max-w-7xl px-4 pt-32",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"تصفية النتائج"}),(0,a.jsx)("button",{onClick:()=>{u(""),m(""),p(""),f("")},className:"text-sm text-blue-600 hover:text-blue-800",children:"إعادة تعيين التصفية"})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"project",className:"block text-sm font-medium text-gray-700",children:"المشروع"}),(0,a.jsxs)("select",{id:"project",value:d,onChange:e=>u(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"جميع المشاريع"}),o.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"الحالة"}),(0,a.jsxs)("select",{id:"status",value:x,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"جميع الحالات"}),(0,a.jsx)("option",{value:"معتمد",children:"معتمد"}),(0,a.jsx)("option",{value:"معلق",children:"معلق"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700",children:"من تاريخ"}),(0,a.jsx)("input",{type:"date",id:"startDate",value:h,onChange:e=>p(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700",children:"إلى تاريخ"}),(0,a.jsx)("input",{type:"date",id:"endDate",value:g,onChange:e=>f(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]})]})]}),(0,a.jsx)("div",{className:"rounded-xl bg-blue-50 p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-blue-900",children:"إجمالي الساعات"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-blue-700",children:"للفترة المحددة"})]}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-blue-900",children:[N," ساعة"]})]})}),(0,a.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-6 text-xl font-semibold text-gray-900",children:"سجل الوقت"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"التاريخ"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"المشروع"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الساعات"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الوصف"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الحالة"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:b.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.date})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.project})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.hours})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.description})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat("معتمد"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id))})]})})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[615,173,441,517,358],()=>s(1946)),_N_E=e.O()}]);